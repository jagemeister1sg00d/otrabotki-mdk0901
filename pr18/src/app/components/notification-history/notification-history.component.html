<div class="history">
  <h3>üìä –ò—Å—Ç–æ—Ä–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</h3>
  
  <div class="filters">
    <button 
      class="filter-btn" 
      [class.active]="dateFilter === null"
      (click)="dateFilter = null"
    >
      –í—Å–µ –¥–∞—Ç—ã
    </button>
    
    @for (date of uniqueDates; track date) {
      <button 
        class="filter-btn" 
        [class.active]="dateFilter?.toDateString() === new Date(date).toDateString()"
        (click)="dateFilter = new Date(date)"
      >
        {{ date }}
      </button>
    }
  </div>
  
  @if (filteredNotifications.length === 0) {
    <div class="empty-state">
      <p>–ù–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</p>
    </div>
  } @else {
    <div class="history-list">
      @for (notification of filteredNotifications; track notification.id) {
        <div class="history-item" [class]="getTypeClass(notification.type)">
          <div class="history-header">
            <div class="history-title">
              <strong>{{ notification.title }}</strong>
              <span class="history-time">
                {{ formatDate(notification.timestamp) }} –≤ {{ formatTime(notification.timestamp) }}
              </span>
            </div>
            <span class="history-status" [class.read]="notification.read">
              {{ notification.read ? '–ø—Ä–æ—á–∏—Ç–∞–Ω–æ' : '–Ω–µ –ø—Ä–æ—á–∏—Ç–∞–Ω–æ' }}
            </span>
          </div>
          
          <p class="history-message">{{ notification.message }}</p>
          
          <div class="history-footer">
            <span class="history-type {{ notification.type }}">
              {{ 
                notification.type === 'info' ? '–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è' :
                notification.type === 'warning' ? '–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ' :
                notification.type === 'error' ? '–û—à–∏–±–∫–∞' : '–£—Å–ø–µ—Ö'
              }}
            </span>
            <span class="history-priority {{ notification.priority }}">
              –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: {{ 
                notification.priority === 'high' ? '–≤—ã—Å–æ–∫–∏–π' :
                notification.priority === 'medium' ? '—Å—Ä–µ–¥–Ω–∏–π' : '–Ω–∏–∑–∫–∏–π'
              }}
            </span>
          </div>
        </div>
      }
    </div>
  }
</div>