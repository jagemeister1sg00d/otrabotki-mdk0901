<div class="analytics-app">
  <header class="header">
    <h1>üìä –°–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ —Å Pipes</h1>
    <p class="subtitle">–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø–∞–π–ø–æ–≤ –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏</p>
  </header>

  <main class="main-content">
    <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è -->
    <section class="controls">
      <h2>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è</h2>
      <div class="control-group">
        <div class="control-item">
          <label>
            <input type="radio" [(ngModel)]="numberFormat" value="auto">
            –ê–≤—Ç–æ—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∏—Å–µ–ª
          </label>
          <label>
            <input type="radio" [(ngModel)]="numberFormat" value="full">
            –ü–æ–ª–Ω—ã–µ —á–∏—Å–ª–∞
          </label>
        </div>
        <div class="control-item">
          <label>
            <input type="checkbox" [(ngModel)]="showEmoji">
            –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —ç–º–æ–¥–∑–∏
          </label>
        </div>
        <div class="control-item">
          <label>–§–æ—Ä–º–∞—Ç —Å—Ä–∞–≤–Ω–µ–Ω–∏—è:</label>
          <select [(ngModel)]="comparisonFormat">
            <option value="both">–ê–±—Å–æ–ª—é—Ç–Ω–æ–µ –∏ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ–µ</option>
            <option value="absolute">–¢–æ–ª—å–∫–æ –∞–±—Å–æ–ª—é—Ç–Ω–æ–µ</option>
            <option value="relative">–¢–æ–ª—å–∫–æ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ–µ</option>
          </select>
        </div>
      </div>
    </section>

    <!-- –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –ø–∞–π–ø–æ–≤ -->
    <section class="builtin-pipes">
      <h2>üîß –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –ø–∞–π–ø—ã Angular</h2>
      <div class="pipes-grid">
        <div class="pipe-demo">
          <h3>date</h3>
          <p>–ë–µ–∑ –ø–∞–π–ø–∞: {{ testDate }}</p>
          <p>–° –ø–∞–π–ø–æ–º: {{ testDate | date:'fullDate' }}</p>
          <p>–ö–æ—Ä–æ—Ç–∫–æ: {{ testDate | date:'dd.MM.yyyy HH:mm' }}</p>
        </div>
        <div class="pipe-demo">
          <h3>currency</h3>
          <p>–ë–µ–∑ –ø–∞–π–ø–∞: {{ testCurrency }}</p>
          <p>–° –ø–∞–π–ø–æ–º: {{ testCurrency | currency:'RUB':'symbol':'1.0-0' }}</p>
          <p>USD: {{ testCurrency | currency:'USD':'symbol':'1.2-2' }}</p>
        </div>
        <div class="pipe-demo">
          <h3>percent</h3>
          <p>–ë–µ–∑ –ø–∞–π–ø–∞: {{ testPercent }}</p>
          <p>–° –ø–∞–π–ø–æ–º: {{ testPercent | percent:'1.1-2' }}</p>
        </div>
        <div class="pipe-demo">
          <h3>uppercase/lowercase</h3>
          <p>–ò—Å—Ö–æ–¥–Ω—ã–π: "Hello World"</p>
          <p>UPPERCASE: {{ 'Hello World' | uppercase }}</p>
          <p>lowercase: {{ 'Hello World' | lowercase }}</p>
        </div>
        <div class="pipe-demo">
          <h3>json</h3>
          <p>–û–±—ä–µ–∫—Ç: {{ metrics[0] | json }}</p>
        </div>
        <div class="pipe-demo">
          <h3>slice</h3>
          <p>–ú–∞—Å—Å–∏–≤: [1, 2, 3, 4, 5]</p>
          <p>slice:1:4: {{ [1, 2, 3, 4, 5] | slice:1:4 }}</p>
        </div>
      </div>
    </section>

    <!-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø–∞–π–ø—ã -->
    <section class="custom-pipes">
      <h2>üé® –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø–∞–π–ø—ã –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏</h2>
      
      <!-- 1. –ü–∞–π–ø —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–µ—Ç—Ä–∏–∫ -->
      <div class="pipe-section">
        <h3>1. metricFormat - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Ç—Ä–∏–∫</h3>
        <p>–§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –±–æ–ª—å—à–∏–µ —á–∏—Å–ª–∞, –ø—Ä–æ—Ü–µ–Ω—Ç—ã –∏ –≤–∞–ª—é—Ç—ã</p>
        <div class="examples">
          <div class="example">
            <h4>–ë–æ–ª—å—à–∏–µ —á–∏—Å–ª–∞:</h4>
            <p>15432 —á–µ–ª. ‚Üí {{ 15432 | metricFormat:'—á–µ–ª.' }}</p>
            <p>1254321 ‚ÇΩ ‚Üí {{ 1254321 | metricFormat:'‚ÇΩ' }}</p>
            <p>2345678 ‚Üí {{ 2345678 | metricFormat:'' }}</p>
          </div>
          <div class="example">
            <h4>–ü—Ä–æ—Ü–µ–Ω—Ç—ã:</h4>
            <p>0.2345 ‚Üí {{ 0.2345 | metricFormat:'%' }}</p>
          </div>
          <div class="example">
            <h4>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–æ—á–Ω–æ—Å—Ç–∏:</h4>
            <p>1234.5678 ‚Üí {{ 1234.5678 | metricFormat:'–µ–¥.':0 }}</p>
            <p>1234.5678 ‚Üí {{ 1234.5678 | metricFormat:'–µ–¥.':4 }}</p>
          </div>
        </div>
      </div>

      <!-- 2. –ü–∞–π–ø –ø—Ä–æ—Ü–µ–Ω—Ç–Ω–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è -->
      <div class="pipe-section">
        <h3>2. percentChange - –ü—Ä–æ—Ü–µ–Ω—Ç–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ</h3>
        <p>–†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –ø—Ä–æ—Ü–µ–Ω—Ç–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –º–µ–∂–¥—É –∑–Ω–∞—á–µ–Ω–∏—è–º–∏</p>
        <div class="examples">
          <div class="example">
            <h4>–ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ:</h4>
            <p>–¢–µ–∫—É—â–µ–µ: 150, –ü—Ä–µ–¥—ã–¥—É—â–µ–µ: 100 ‚Üí {{ 150 | percentChange:100 }}</p>
          </div>
          <div class="example">
            <h4>–û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ:</h4>
            <p>–¢–µ–∫—É—â–µ–µ: 80, –ü—Ä–µ–¥—ã–¥—É—â–µ–µ: 100 ‚Üí {{ 80 | percentChange:100 }}</p>
          </div>
          <div class="example">
            <h4>–ë–µ–∑ –∑–Ω–∞–∫–∞:</h4>
            <p>150 vs 100 ‚Üí {{ 150 | percentChange:100:false }}</p>
          </div>
          <div class="example">
            <h4>–ë–æ–ª—å—à–µ –∑–Ω–∞–∫–æ–≤:</h4>
            <p>150.5 vs 100.2 ‚Üí {{ 150.5 | percentChange:100.2:true:2 }}</p>
          </div>
        </div>
      </div>

      <!-- 3. –ü–∞–π–ø —Ç—Ä–µ–Ω–¥–æ–≤ -->
      <div class="pipe-section">
        <h3>3. trend - –¢—Ä–µ–Ω–¥—ã –∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è</h3>
        <p>–í–∏–∑—É–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ç—Ä–µ–Ω–¥—ã —Å —ç–º–æ–¥–∑–∏ –∏–ª–∏ –±–µ–∑</p>
        <div class="examples">
          <div class="example">
            <h4>–° —ç–º–æ–¥–∑–∏:</h4>
            <p>–†–æ—Å—Ç: {{ 'up' | trend:12.5 }}</p>
            <p>–°–Ω–∏–∂–µ–Ω–∏–µ: {{ 'down' | trend:-3.2 }}</p>
            <p>–°—Ç–∞–±–∏–ª—å–Ω–æ: {{ 'stable' | trend:0.5 }}</p>
          </div>
          <div class="example">
            <h4>–ë–µ–∑ —ç–º–æ–¥–∑–∏:</h4>
            <p>–†–æ—Å—Ç: {{ 'up' | trend:12.5:false }}</p>
            <p>–°–Ω–∏–∂–µ–Ω–∏–µ: {{ 'down' | trend:-3.2:false }}</p>
          </div>
        </div>
      </div>

      <!-- 4. –ü–∞–π–ø —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –ø–µ—Ä–∏–æ–¥–æ–≤ -->
      <div class="pipe-section">
        <h3>4. periodComparison - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–æ–≤</h3>
        <p>–°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —Ç–µ–∫—É—â–µ–µ –∏ –ø—Ä–µ–¥—ã–¥—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö</p>
        <div class="examples">
          <div class="example">
            <h4>–û–±–∞ —Ñ–æ—Ä–º–∞—Ç–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é):</h4>
            <p>150 vs 100 ‚Üí {{ 150 | periodComparison:100 }}</p>
          </div>
          <div class="example">
            <h4>–¢–æ–ª—å–∫–æ –∞–±—Å–æ–ª—é—Ç–Ω–æ–µ:</h4>
            <p>150 vs 100 ‚Üí {{ 150 | periodComparison:100:'absolute' }}</p>
          </div>
          <div class="example">
            <h4>–¢–æ–ª—å–∫–æ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ–µ:</h4>
            <p>150 vs 100 ‚Üí {{ 150 | periodComparison:100:'relative' }}</p>
          </div>
        </div>
      </div>

      <!-- 5. –ü–∞–π–ø –ø—Ä–æ–≥–Ω–æ–∑–æ–≤ -->
      <div class="pipe-section">
        <h3>5. forecast - –ü—Ä–æ–≥–Ω–æ–∑—ã</h3>
        <p>–§–æ—Ä–º–∏—Ä—É–µ—Ç —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –ø—Ä–æ–≥–Ω–æ–∑—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ–∫—É—â–∏—Ö –∏ –ø—Ä–æ–≥–Ω–æ–∑–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π</p>
        <div class="examples">
          <div class="example">
            <h4>–†–æ—Å—Ç:</h4>
            <p>–¢–µ–∫—É—â–µ–µ: 1000, –ü—Ä–æ–≥–Ω–æ–∑: 1200 ‚Üí {{ 1000 | forecast:1200 }}</p>
          </div>
          <div class="example">
            <h4>–°–Ω–∏–∂–µ–Ω–∏–µ:</h4>
            <p>–¢–µ–∫—É—â–µ–µ: 1000, –ü—Ä–æ–≥–Ω–æ–∑: 850 ‚Üí {{ 1000 | forecast:850 }}</p>
          </div>
          <div class="example">
            <h4>–ë–µ–∑ —É—Ä–æ–≤–Ω—è –¥–æ–≤–µ—Ä–∏—è:</h4>
            <p>1000 ‚Üí 1200 ‚Üí {{ 1000 | forecast:1200:0.8:false }}</p>
          </div>
          <div class="example">
            <h4>–° –Ω–∏–∑–∫–∏–º –¥–æ–≤–µ—Ä–∏–µ–º:</h4>
            <p>1000 ‚Üí 1200 ‚Üí {{ 1000 | forecast:1200:0.5 }}</p>
          </div>
        </div>
      </div>

      <!-- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞–π–ø–æ–≤ -->
      <div class="test-section">
        <h3>üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞–π–ø–æ–≤</h3>
        <div class="test-form">
          <div class="form-group">
            <label>–¢–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:</label>
            <input type="number" [(ngModel)]="userNumber" step="0.01">
          </div>
          <div class="form-group">
            <label>–ü—Ä–µ–¥—ã–¥—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:</label>
            <input type="number" [(ngModel)]="userPrevious" step="0.01">
          </div>
          <div class="form-group">
            <label>–ï–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è:</label>
            <select [(ngModel)]="userUnit">
              <option value="‚ÇΩ">–†—É–±–ª–∏</option>
              <option value="$">–î–æ–ª–ª–∞—Ä—ã</option>
              <option value="%">–ü—Ä–æ—Ü–µ–Ω—Ç—ã</option>
              <option value="—á–µ–ª.">–ß–µ–ª–æ–≤–µ–∫</option>
            </select>
          </div>
        </div>
        
        <div class="test-results">
          <h4>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:</h4>
          <p><strong>–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:</strong> {{ userNumber | metricFormat:userUnit }}</p>
          <p><strong>–ò–∑–º–µ–Ω–µ–Ω–∏–µ:</strong> {{ userNumber | percentChange:userPrevious }}</p>
          <p><strong>–°—Ä–∞–≤–Ω–µ–Ω–∏–µ:</strong> {{ userNumber | periodComparison:userPrevious:comparisonFormat }}</p>
          <p><strong>–ü—Ä–æ–≥–Ω–æ–∑:</strong> {{ userNumber | forecast:(userNumber * 1.2) }}</p>
        </div>
      </div>
    </section>

    <!-- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–µ -->
    <section class="real-application">
      <h2>üìà –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø–∞–π–ø–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–µ</h2>
      
      <!-- –¢–∞–±–ª–∏—Ü–∞ –º–µ—Ç—Ä–∏–∫ -->
      <div class="metrics-table">
        <h3>–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏</h3>
        <table>
          <thead>
            <tr>
              <th>–ú–µ—Ç—Ä–∏–∫–∞</th>
              <th>–¢–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ</th>
              <th>–ü—Ä–µ–¥—ã–¥—É—â–µ–µ</th>
              <th>–ò–∑–º–µ–Ω–µ–Ω–∏–µ</th>
              <th>–¢—Ä–µ–Ω–¥</th>
              <th>–ü—Ä–æ–≥–Ω–æ–∑</th>
            </tr>
          </thead>
          <tbody>
            @for (metric of metrics; track metric.id) {
              <tr>
                <td>{{ metric.name }}</td>
                <td>{{ metric.value | metricFormat:metric.unit }}</td>
                <td>{{ metric.previousValue | metricFormat:metric.unit }}</td>
                <td 
                  [class.positive]="metric.changePercent > 0"
                  [class.negative]="metric.changePercent < 0"
                >
                  {{ metric | percentChange:metric.previousValue }}
                </td>
                <td 
                  [style.color]="getTrendColor(metric.trend)"
                >
                  {{ metric.trend | trend:metric.changePercent:showEmoji }}
                </td>
                <td>{{ metric.value | forecast:metric.forecastValue }}</td>
              </tr>
            }
          </tbody>
        </table>
      </div>

      <!-- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–æ–≤ -->
      <div class="periods-comparison">
        <h3>–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ –ø–µ—Ä–∏–æ–¥–∞–º</h3>
        <div class="periods-grid">
          @for (period of periodData.slice(0, 3); track period.period) {
            <div class="period-card">
              <h4>{{ period.period }}</h4>
              <p class="period-dates">
                {{ period.startDate | date:'dd.MM' }} - {{ period.endDate | date:'dd.MM.yy' }}
              </p>
              <div class="period-metrics">
                @for (metric of period.metrics.slice(0, 2); track metric.id) {
                  <div class="period-metric">
                    <div class="metric-name">{{ metric.name }}</div>
                    <div class="metric-value">{{ metric.value | metricFormat:metric.unit:0 }}</div>
                    @if ($index < 1) {
                      <div class="metric-change">
                        {{ metric.value | periodComparison:metric.previousValue:'relative' }}
                      </div>
                    }
                  </div>
                }
              </div>
            </div>
          }
        </div>
      </div>

      <!-- –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Ç—Ä–µ–Ω–¥–æ–≤ -->
      <div class="trends-visualization">
        <h3>–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Ç—Ä–µ–Ω–¥–æ–≤</h3>
        <div class="trend-charts">
          @for (metric of metrics.slice(0, 2); track metric.id) {
            <div class="trend-chart">
              <h4>{{ metric.name }}</h4>
              <div class="chart-container">
                <div class="chart">
                  @for (value of getTrendData(metric.name); track $index) {
                    <div 
                      class="chart-bar" 
                      [style.height.%]="(value / 2000) * 100"
                      [title]="value | metricFormat:metric.unit"
                    ></div>
                  }
                </div>
                <div class="chart-labels">
                  <span>12 –º–µ—Å –Ω–∞–∑–∞–¥</span>
                  <span>–°–µ–π—á–∞—Å</span>
                </div>
              </div>
              <div class="chart-info">
                <p>–¢—Ä–µ–Ω–¥: {{ metric.trend | trend:metric.changePercent:showEmoji }}</p>
                <p>–ü—Ä–æ–≥–Ω–æ–∑: {{ metric.value | forecast:metric.forecastValue:0.8:false }}</p>
              </div>
            </div>
          }
        </div>
      </div>
    </section>
  </main>

  <footer class="footer">
    <div class="footer-content">
      <p>–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞–±–æ—Ç–∞: –ü–∞–π–ø—ã (Pipes) –≤ Angular</p>
      <p>–í–∞—Ä–∏–∞–Ω—Ç 10: –ü–∞–π–ø—ã –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –∞–Ω–∞–ª–∏—Ç–∏–∫–∏</p>
      <p class="pipe-list">
        –°–æ–∑–¥–∞–Ω–Ω—ã–µ –ø–∞–π–ø—ã: 
        <span class="pipe-badge">metricFormat</span>
        <span class="pipe-badge">percentChange</span>
        <span class="pipe-badge">trend</span>
        <span class="pipe-badge">periodComparison</span>
        <span class="pipe-badge">forecast</span>
      </p>
    </div>
  </footer>
</div>